---
title: "Webページが表示されるまでを考えてみる"
date: "2022-02-23"
tags: ["Web", "HTTP", "ブラウザ"]
draft: true
---

## はじめに

自分の知識の整理のため、ユーザーがブラウザのアドレスバーにURLを入力してからWebページが表示されるまでになにが起こっているのか整理してみる。

##

URLにブラウザがHTTPGETリクエスト
DNSにURLのIPアドレスへの変換をしてもらう
GETリクエストさんが指定のIPアドレスのサーバに届く
サーバはWebページとしてHTMLをレスポンスする。サーバは必要であればデータベースや他のサーバともやり取りして処理を行う。
受け取ったHTMLをブラウザがパースしてレンダリング
DOMが出来上がる
DOMに対してスタイルを適用
JSがあればスクリプトが実行される


## ping
システムコールを通してOSにネットワーク通信してもらう。
socket
sendto
recvmsg
write

ソケット
ネットワーク通信に必要なインターフェースを抽象化したもの

ソケットディスクリプタというプロセスごとに一意な数字で区別されている
どのソケットを使ってやり取りすればよいかOSに伝えることができる

int socket(int domain, int type, int protocol);

戻り値がソケットディスクリプタ


sendto
指定されたソケットを使って、指定されたソケットを使って、指定されたアドレスにデータを送信できる

sockfd 使うソケットの番号
buf, len 送るデータとその長さ
flags 送信時の挙動を設定するオプション
dest_addr, addrlen 送信先のアドレスを保持する構造体と、それを保持するデータ構造の大きさ

recvfrom
パケットを受信する
recvmsgはrecvfromの特別な場合に当たる。

sendtoと逆方向のことをするシステムコール

sockfd 使うソケットの番号
buf, len 受信したデータとその長さ
flags 送信時の挙動を設定するオプション
dest_addr, addrlen 送信元のアドレスを保持する構造体と、それを保持するデータ構造の大きさ



